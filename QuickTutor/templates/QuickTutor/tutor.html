{% extends 'QuickTutor/base.html' %}

{% block content %}
{% load static %}


{{ currentTutor }}

<style>
    .coverPhoto {
        background-image: linear-gradient(rgba(79, 94, 99, 0.486), rgba(79, 94, 99, 0.486)),url('https://www.itl.cat/pngfile/big/14-140246_beautiful-nature-wallpaper-background-free-beautiful-nature-background.jpg'); 
        background-repeat: no-repeat; 
        background-size: cover; 
        background-position: center;
        position: fixed;
        width: 100%;
        height: 40vh;
        top: 0;
        left: 0;
        z-index: -1;
    }
</style>

<div class="row">
    <div class="col-md-8" style="margin: 8vh 0 0 15vh">
        <div class="coverPhoto"></div>
        <div class="row">
            <img src="https://www.swifthausdesign.com/wp-content/uploads/2014/08/profileIcon-300x300.jpg" style="border-radius: 50%;" alt="Avatar" width="150px">
            <div style="margin-left: 1vh;">
                <a>
                    <h1>{{tutor.firstName}} {{tutor.lastName}}</h1>
                    <h5 style="color:rgb(206, 206, 206)">{{tutor.major}}</h5>
                    <h5 style="color:rgb(206, 206, 206)">{{tutor.year}} Year</h5>
                    <h6 style="color:rgb(206, 206, 206)">{{user.username}}@virgnia.edu</h6>
                </a>
            </div>
            
        </div>
        <div class="row text-center" style="margin-top: 2vh">
            <div class="col-3">
                <h1>29</h1>
                Sessions
            </div>
            <div class="col-3">
                <h1>101</h1>
                Tutors Online
            </div>
            <div class="col-3">
                <h1>${{tutor.balance}}</h1>
                Balance
            </div>
        </div>
        
    </div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
    
</div>

{% if user.is_authenticated %}
{% for request in studentRequestList %}
<div class='row' style='margin-top: 2em;'>
    <div class='col-md-3'></div>
    <div class="col-md-6" style='margin: 0 auto;'>
        <div class="cardbox shadow-lg bg-white">

            <div class="cardbox-heading">
                <!-- START dropdown-->
                <div class="dropdown float-right">
                    <button class="btn btn-flat btn-flat-icon" type="button" data-toggle="dropdown"
                        aria-expanded="false">
                        <em class="fa fa-ellipsis-h"></em>
                    </button>
                    <div class="dropdown-menu dropdown-scale dropdown-menu-right" role="menu"
                        style="position: absolute; transform: translate3d(-136px, 28px, 0px); top: 0px; left: 0px; will-change: transform;">
                        <a class="dropdown-item" onclick=transfer("{{request.studentUsername}}") style="color:green; cursor: pointer;">Accept</a>
                    </div>
                </div>
                <!--/ dropdown -->
                <div class="media m-0">
                    <div class="d-flex mr-3">
                        <a href=""><img class="img-fluid rounded-circle"
                                src="https://www.swifthausdesign.com/wp-content/uploads/2014/08/profileIcon-300x300.jpg"
                                alt="User"></a>
                    </div>
                    <div class="media-body">
                        <p class="m-0">{{request.studentEmail}}</p>
                        <small><span><i class="fas fa-map-marker-alt"></i> {{request.location}}</span></small>
                        <small><span><i class="icon ion-md-time"></i> x minutes ago</span></small>
                    </div>
                </div>
                <!--/ media -->
            </div>
            <!--/ cardbox-heading -->

            <!-- MAIN CONTENT -->
            <div class="row" style="margin-left: 3em; color:black;">
                <div class='col-8'>
                    <a style="font-size: 2em; color: black">{{request.header}} </a> <p>{{request.courseName}}</p>

                    <p>{{request.description}}</p>
                </div>
                <div class='col-3 text-center' style='margin: 1vh 0 0 0'>
                    <div class="single-chart">
                        <svg viewBox="0 0 36 36" class="circular-chart confusion">
                            <path class="circle-bg"
                            d="M18 2.0845
                                a 15.9155 15.9155 0 0 1 0 31.831
                                a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <path id="actSVG" class="circle"
                            stroke-dasharray="{{request.confusionMeter}}0, 100"
                            d="M18 2.0845
                                a 15.9155 15.9155 0 0 1 0 31.831
                                a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <text x="18" y="20.35" class="percentage">{{request.confusionMeter}}</text>
                        </svg>
                        <a style="color:red; text-align: center; font-weight: 500;">Confusion</a>
                    </div>
                </div>
                
            </div>
            <!--/ MAIN CONTENT -->

            <div class="cardbox-base text-center" style='margin: 1vh 0 0 0; padding: 0 0 1vh 0'>

                    <a class="btn btn-primary" onclick=transfer("{{request.studentUsername}}")>
                        Accept
                    </a>
            </div>
            <!--/ cardbox-base -->

        </div>
        <!--/ cardbox -->

    </div>
    <!--/ col-6 -->

    <div class='col-md-3'></div>

</div>
<!--/ row -->

{% endfor %}


{% else %}


{% endif %}


<script>
    function transfer(user_id){
        window.location.replace("match/" + user_id);
    }
</script>
{% endblock %}